{"componentChunkName":"component---src-templates-post-tsx","path":"/2022-01-92-template-4 copy/","result":{"data":{"markdownRemark":{"html":"<p>This example deals with handling support tickets.\nCurrently process tickets has weak cohesion because it's responsible for not only processing the tickets, but also for implementing each of these different strategies</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> string\n<span class=\"token keyword\">import</span> random\n<span class=\"token keyword\">from</span> typing <span class=\"token keyword\">import</span> List\n\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">generate_id</span><span class=\"token punctuation\">(</span>length<span class=\"token operator\">=</span><span class=\"token number\">8</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token comment\"># helper function for generating an id</span>\n    <span class=\"token keyword\">return</span> <span class=\"token string\">''</span><span class=\"token punctuation\">.</span>join<span class=\"token punctuation\">(</span>random<span class=\"token punctuation\">.</span>choices<span class=\"token punctuation\">(</span>string<span class=\"token punctuation\">.</span>ascii_uppercase<span class=\"token punctuation\">,</span> k<span class=\"token operator\">=</span>length<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">SupportTicket</span><span class=\"token punctuation\">:</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">__init__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> customer<span class=\"token punctuation\">,</span> issue<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        self<span class=\"token punctuation\">.</span><span class=\"token builtin\">id</span> <span class=\"token operator\">=</span> generate_id<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>customer <span class=\"token operator\">=</span> customer\n        self<span class=\"token punctuation\">.</span>issue <span class=\"token operator\">=</span> issue\n\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">CustomerSupport</span><span class=\"token punctuation\">:</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">__init__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> processing_strategy<span class=\"token punctuation\">:</span> <span class=\"token builtin\">str</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"fifo\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        self<span class=\"token punctuation\">.</span>tickets <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n        self<span class=\"token punctuation\">.</span>processing_strategy <span class=\"token operator\">=</span> processing_strategy\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">create_ticket</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> customer<span class=\"token punctuation\">,</span> issue<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        self<span class=\"token punctuation\">.</span>tickets<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>SupportTicket<span class=\"token punctuation\">(</span>customer<span class=\"token punctuation\">,</span> issue<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">process_tickets</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token comment\"># if it's empty, don't do anything</span>\n        <span class=\"token keyword\">if</span> <span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>tickets<span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">:</span>\n            <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"There are no tickets to process. Well done!\"</span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">return</span>\n\n        <span class=\"token keyword\">if</span> self<span class=\"token punctuation\">.</span>processing_strategy <span class=\"token operator\">==</span> <span class=\"token string\">\"fifo\"</span><span class=\"token punctuation\">:</span>\n            <span class=\"token keyword\">for</span> ticket <span class=\"token keyword\">in</span> self<span class=\"token punctuation\">.</span>tickets<span class=\"token punctuation\">:</span>\n                self<span class=\"token punctuation\">.</span>process_ticket<span class=\"token punctuation\">(</span>ticket<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">elif</span> self<span class=\"token punctuation\">.</span>processing_strategy <span class=\"token operator\">==</span> <span class=\"token string\">\"filo\"</span><span class=\"token punctuation\">:</span>\n            <span class=\"token keyword\">for</span> ticket <span class=\"token keyword\">in</span> <span class=\"token builtin\">reversed</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>tickets<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n                self<span class=\"token punctuation\">.</span>process_ticket<span class=\"token punctuation\">(</span>ticket<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">elif</span> self<span class=\"token punctuation\">.</span>processing_strategy <span class=\"token operator\">==</span> <span class=\"token string\">\"random\"</span><span class=\"token punctuation\">:</span>\n            list_copy <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>tickets<span class=\"token punctuation\">.</span>copy<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n            random<span class=\"token punctuation\">.</span>shuffle<span class=\"token punctuation\">(</span>list_copy<span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">for</span> ticket <span class=\"token keyword\">in</span> list_copy<span class=\"token punctuation\">:</span>\n                self<span class=\"token punctuation\">.</span>process_ticket<span class=\"token punctuation\">(</span>ticket<span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">process_ticket</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> ticket<span class=\"token punctuation\">:</span> SupportTicket<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"==================================\"</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string-interpolation\"><span class=\"token string\">f\"Processing ticket id: </span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>ticket<span class=\"token punctuation\">.</span><span class=\"token builtin\">id</span><span class=\"token punctuation\">}</span></span><span class=\"token string\">\"</span></span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string-interpolation\"><span class=\"token string\">f\"Customer: </span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>ticket<span class=\"token punctuation\">.</span>customer<span class=\"token punctuation\">}</span></span><span class=\"token string\">\"</span></span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string-interpolation\"><span class=\"token string\">f\"Issue: </span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>ticket<span class=\"token punctuation\">.</span>issue<span class=\"token punctuation\">}</span></span><span class=\"token string\">\"</span></span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"==================================\"</span><span class=\"token punctuation\">)</span>\n\n\n<span class=\"token comment\"># create the application</span>\napp <span class=\"token operator\">=</span> CustomerSupport<span class=\"token punctuation\">(</span><span class=\"token string\">\"filo\"</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># register a few tickets</span>\napp<span class=\"token punctuation\">.</span>create_ticket<span class=\"token punctuation\">(</span><span class=\"token string\">\"John Smith\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"My computer makes strange sounds!\"</span><span class=\"token punctuation\">)</span>\napp<span class=\"token punctuation\">.</span>create_ticket<span class=\"token punctuation\">(</span><span class=\"token string\">\"Linus Sebastian\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"I can't upload any videos, please help.\"</span><span class=\"token punctuation\">)</span>\napp<span class=\"token punctuation\">.</span>create_ticket<span class=\"token punctuation\">(</span><span class=\"token string\">\"Arjan Egges\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"VSCode doesn't automatically solve my bugs.\"</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># process the tickets</span>\napp<span class=\"token punctuation\">.</span>process_tickets<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Solution using functions</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> string\n<span class=\"token keyword\">import</span> random\n<span class=\"token keyword\">from</span> typing <span class=\"token keyword\">import</span> List<span class=\"token punctuation\">,</span> Callable\n\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">generate_id</span><span class=\"token punctuation\">(</span>length<span class=\"token operator\">=</span><span class=\"token number\">8</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token comment\"># helper function for generating an id</span>\n    <span class=\"token keyword\">return</span> <span class=\"token string\">''</span><span class=\"token punctuation\">.</span>join<span class=\"token punctuation\">(</span>random<span class=\"token punctuation\">.</span>choices<span class=\"token punctuation\">(</span>string<span class=\"token punctuation\">.</span>ascii_uppercase<span class=\"token punctuation\">,</span> k<span class=\"token operator\">=</span>length<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">SupportTicket</span><span class=\"token punctuation\">:</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">__init__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> customer<span class=\"token punctuation\">,</span> issue<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        self<span class=\"token punctuation\">.</span><span class=\"token builtin\">id</span> <span class=\"token operator\">=</span> generate_id<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>customer <span class=\"token operator\">=</span> customer\n        self<span class=\"token punctuation\">.</span>issue <span class=\"token operator\">=</span> issue\n\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">fifoOrdering</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">list</span><span class=\"token punctuation\">:</span> List<span class=\"token punctuation\">[</span>SupportTicket<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> List<span class=\"token punctuation\">[</span>SupportTicket<span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">return</span> <span class=\"token builtin\">list</span><span class=\"token punctuation\">.</span>copy<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">filoOrdering</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">list</span><span class=\"token punctuation\">:</span> List<span class=\"token punctuation\">[</span>SupportTicket<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> List<span class=\"token punctuation\">[</span>SupportTicket<span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span>\n    list_copy <span class=\"token operator\">=</span> <span class=\"token builtin\">list</span><span class=\"token punctuation\">.</span>copy<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    list_copy<span class=\"token punctuation\">.</span>reverse<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> list_copy\n\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">randomOrdering</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">list</span><span class=\"token punctuation\">:</span> List<span class=\"token punctuation\">[</span>SupportTicket<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> List<span class=\"token punctuation\">[</span>SupportTicket<span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span>\n    list_copy <span class=\"token operator\">=</span> <span class=\"token builtin\">list</span><span class=\"token punctuation\">.</span>copy<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    random<span class=\"token punctuation\">.</span>shuffle<span class=\"token punctuation\">(</span>list_copy<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> list_copy\n\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">blackHoleOrdering</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">list</span><span class=\"token punctuation\">:</span> List<span class=\"token punctuation\">[</span>SupportTicket<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> List<span class=\"token punctuation\">[</span>SupportTicket<span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">CustomerSupport</span><span class=\"token punctuation\">:</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">__init__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        self<span class=\"token punctuation\">.</span>tickets <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">create_ticket</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> customer<span class=\"token punctuation\">,</span> issue<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        self<span class=\"token punctuation\">.</span>tickets<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>SupportTicket<span class=\"token punctuation\">(</span>customer<span class=\"token punctuation\">,</span> issue<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">process_tickets</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> ordering<span class=\"token punctuation\">:</span> Callable<span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span>List<span class=\"token punctuation\">[</span>SupportTicket<span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> List<span class=\"token punctuation\">[</span>SupportTicket<span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token comment\"># create the ordered list</span>\n        ticket_list <span class=\"token operator\">=</span> ordering<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>tickets<span class=\"token punctuation\">)</span>\n\n        <span class=\"token comment\"># if it's empty, don't do anything</span>\n        <span class=\"token keyword\">if</span> <span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>ticket_list<span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">:</span>\n            <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"There are no tickets to process. Well done!\"</span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">return</span>\n\n        <span class=\"token comment\"># go through the tickets in the list</span>\n        <span class=\"token keyword\">for</span> ticket <span class=\"token keyword\">in</span> ticket_list<span class=\"token punctuation\">:</span>\n            self<span class=\"token punctuation\">.</span>process_ticket<span class=\"token punctuation\">(</span>ticket<span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">process_ticket</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> ticket<span class=\"token punctuation\">:</span> SupportTicket<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"==================================\"</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string-interpolation\"><span class=\"token string\">f\"Processing ticket id: </span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>ticket<span class=\"token punctuation\">.</span><span class=\"token builtin\">id</span><span class=\"token punctuation\">}</span></span><span class=\"token string\">\"</span></span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string-interpolation\"><span class=\"token string\">f\"Customer: </span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>ticket<span class=\"token punctuation\">.</span>customer<span class=\"token punctuation\">}</span></span><span class=\"token string\">\"</span></span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string-interpolation\"><span class=\"token string\">f\"Issue: </span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>ticket<span class=\"token punctuation\">.</span>issue<span class=\"token punctuation\">}</span></span><span class=\"token string\">\"</span></span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"==================================\"</span><span class=\"token punctuation\">)</span>\n\n\n<span class=\"token comment\"># create the application</span>\napp <span class=\"token operator\">=</span> CustomerSupport<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># register a few tickets</span>\napp<span class=\"token punctuation\">.</span>create_ticket<span class=\"token punctuation\">(</span><span class=\"token string\">\"John Smith\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"My computer makes strange sounds!\"</span><span class=\"token punctuation\">)</span>\napp<span class=\"token punctuation\">.</span>create_ticket<span class=\"token punctuation\">(</span><span class=\"token string\">\"Linus Sebastian\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"I can't upload any videos, please help.\"</span><span class=\"token punctuation\">)</span>\napp<span class=\"token punctuation\">.</span>create_ticket<span class=\"token punctuation\">(</span><span class=\"token string\">\"Arjan Egges\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"VSCode doesn't automatically solve my bugs.\"</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># process the tickets</span>\napp<span class=\"token punctuation\">.</span>process_tickets<span class=\"token punctuation\">(</span>blackHoleOrdering<span class=\"token punctuation\">)</span></code></pre></div>","excerpt":"This example deals with handling support tickets.\nCurrently process tickets has weak cohesion because it's responsible for not only process…","tableOfContents":"","fields":{"slug":"/2022-01-92-template-4 copy/"},"frontmatter":{"title":"template 4","date":"Jan 22, 2022","tags":["patterns","python"],"keywords":["ecmascript","es7","es8","es9","es10","es11","es2016","es2017","es2018","es2019","es2020"],"update":"Feb 06, 2022"}}},"pageContext":{"slug":"/2022-01-92-template-4 copy/","series":[],"lastmod":"2022-02-06"}},"staticQueryHashes":["2027115977","694178885"]}